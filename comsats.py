import requests
from time import sleep
from bs4 import BeautifulSoup




# Add these values
API_KEY = 'e2c17caed43ef918e50d8aed51530aae'  # Your 2captcha API KEY
site_key = '6LfOHSYUAAAAAPqmsHGoc8qhToQTsK9nGFUsrTmF'  # site-key, read the 2captcha docs on how to get this
url = 'https://cms.comsats.edu.pk:8092/login.aspx'  # example url
proxy = '35.190.188.164:80'  # example proxy



s = requests.Session()

# here we post site key to 2captcha to get captcha ID (and we parse it here too)
captcha_id = s.post("http://2captcha.com/in.php?key={}&method=userrecaptcha&googlekey={}&pageurl={}".format(API_KEY, site_key, url)).text.split('|')[1]
#print(captcha_id)
# then we parse gresponse from 2captcha response
recaptcha_answer = s.get("http://2captcha.com/res.php?key={}&action=get&id={}".format(API_KEY, captcha_id)).text
print("solving ref captcha...")
while 'CAPCHA_NOT_READY' in recaptcha_answer:
    sleep(5)
    recaptcha_answer = s.get("http://2captcha.com/res.php?key={}&action=get&id={}".format(API_KEY, captcha_id)).text
recaptcha_answer = recaptcha_answer.split('|')[1]

#print(recaptcha_answer)
payload = {
     '__VIEWSTATE':'/wEPDwULLTE1MjIzMzY1ODIPZBYCZg9kFgoCAQ8PFgIeCEltYWdlVXJsBRt+L3Jlc291cmNlcy9pbWFnZXMvbG9nby5wbmdkZAIDDxYCHgdWaXNpYmxlZxYCAgEPFgIeCWlubmVyaHRtbAUWSW52YWxpZCBMb2dpbi9QYXNzd29yZGQCBQ8QDxYGHg1EYXRhVGV4dEZpZWxkBQpTaG9ydF9OYW1lHg5EYXRhVmFsdWVGaWVsZAUKU2hvcnRfTmFtZR4LXyFEYXRhQm91bmRnFgIeCG9uQ2hhbmdlBQ51cGRhdGVEZXRhaWwoKRAVNwRGQTAwBEZBMDEERkEwMgRGQTAzBEZBMDQERkEwNQRGQTA2BEZBMDcERkEwOARGQTA5BEZBMTAERkExMQRGQTEyBEZBMTMERkExNARGQTE1BEZBMTYERkExNwRGQTk5BFNQMDAEU1AwMQRTUDAyBFNQMDMEU1AwNARTUDA1BFNQMDYEU1AwNwRTUDA4BFNQMDkEU1AxMARTUDExBFNQMTIEU1AxMwRTUDE0BFNQMTUEU1AxNgRTUDE3BFNVMDAEU1UwMQRTVTAyBFNVMDMEU1UwNARTVTA1BFNVMDYEU1UwNwRTVTA4BFNVMDkEU1UxMARTVTExBFNVMTIEU1UxMwRTVTE0BFNVMTUEU1UxNgRTVTE3FTcERkEwMARGQTAxBEZBMDIERkEwMwRGQTA0BEZBMDUERkEwNgRGQTA3BEZBMDgERkEwOQRGQTEwBEZBMTEERkExMgRGQTEzBEZBMTQERkExNQRGQTE2BEZBMTcERkE5OQRTUDAwBFNQMDEEU1AwMgRTUDAzBFNQMDQEU1AwNQRTUDA2BFNQMDcEU1AwOARTUDA5BFNQMTAEU1AxMQRTUDEyBFNQMTMEU1AxNARTUDE1BFNQMTYEU1AxNwRTVTAwBFNVMDEEU1UwMgRTVTAzBFNVMDQEU1UwNQRTVTA2BFNVMDcEU1UwOARTVTA5BFNVMTAEU1UxMQRTVTEyBFNVMTMEU1UxNARTVTE1BFNVMTYEU1UxNxQrAzdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZGQCBw8QDxYGHwMFBE5hbWUfBAUETmFtZR8FZxYCHwYFDnVwZGF0ZURldGFpbCgpEBVbA0JBRgNCQVIDQkJBA0JCRQNCQkkDQkJTA0JDRQVCQ0XCoANCQ1MHQkNTLUJDRQNCREUDQkVDA0JFRQNCRUwDQkVTA0JFVANCSVQDQlBIA0JQWQdCUyhFQ0UpA0JTQgNCU0QDQlNFA0JTSQNCU00DQlNPA0JTUwNCVE4DRUNFA0VFRQNFUEUDTUI0A01CNwNNQkEHTUJBLU1CSQNNQkUHTUJFLU1JRQNNQkkDTUJNA01CTwNNQlQDTUJYA01DUwNNRU0DTUlFA01JVANNTUUDTVBNA01TRQNNVEMDUEFSA1BCSQNQQk0DUEJTA1BDRQNQQ1MDUEVFA1BHRANQSEkDUE1FA1BNRwNQTUkDUE1TA1BNVANQUEgDUkFSA1JCQQNSQkYDUkJJA1JCTQNSQlMDUkNFA1JDUwNSRUMDUkVFA1JFTANSRU0DUkhJA1JJUgNSSVMDUk1FA1JNRwNSTUkDUk1TA1JNVANSTVYDUk5UA1JQSANSUE0DUlJHA1JTRRVbA0JBRgNCQVIDQkJBA0JCRQNCQkkDQkJTA0JDRQVCQ0XCoANCQ1MHQkNTLUJDRQNCREUDQkVDA0JFRQNCRUwDQkVTA0JFVANCSVQDQlBIA0JQWQdCUyhFQ0UpA0JTQgNCU0QDQlNFA0JTSQNCU00DQlNPA0JTUwNCVE4DRUNFA0VFRQNFUEUDTUI0A01CNwNNQkEHTUJBLU1CSQNNQkUHTUJFLU1JRQNNQkkDTUJNA01CTwNNQlQDTUJYA01DUwNNRU0DTUlFA01JVANNTUUDTVBNA01TRQNNVEMDUEFSA1BCSQNQQk0DUEJTA1BDRQNQQ1MDUEVFA1BHRANQSEkDUE1FA1BNRwNQTUkDUE1TA1BNVANQUEgDUkFSA1JCQQNSQkYDUkJJA1JCTQNSQlMDUkNFA1JDUwNSRUMDUkVFA1JFTANSRU0DUkhJA1JJUgNSSVMDUk1FA1JNRwNSTUkDUk1TA1JNVANSTVYDUk5UA1JQSANSUE0DUlJHA1JTRRQrA1tnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZGQCCQ8PZBYCHgdvbktleVVwBQ51cGRhdGVEZXRhaWwoKWRk+jqmV6AAgVyEAUJ8RSxN0g3byUlC+NvGvKVcB84X6qs=',
     '__EVENTVALIDATION': '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',
     'ddl_Session' : 'SP14',
     'ddl_Program' : 'BCS',
     'txt_RollNo' : '142',
    'txt_Password':'Geeks7173300!',
    'g-recaptcha-response': recaptcha_answer,
    'btn_StudentSignIn':'Sign In'
    }


# then send the post request to the url
req = requests.Session()
response = req.post(url, payload)
#print(response.text)
res = req.get('https://cms.comsats.edu.pk:8092/StudentResultCard.aspx')
#print(res.text)


soup = BeautifulSoup(res.text,'html.parser')
tt=soup.get_text()
st = 'Result Semester: Spring 2017'
if st in tt:
    print("Result Announced")
else:
    print("Result Not Announced")
        
